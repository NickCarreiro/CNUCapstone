{% extends "base.html" %}
{% block body_class %}page-trash{% endblock %}
{% block content %}
{% set trashed_count = files|length %}
<section class="card hero-card trash-hero">
  <div class="eyebrow">Recovery Zone</div>
  <h1>Trash</h1>
  <p class="muted">Items here are out of your vault listing but still recoverable until permanently deleted.</p>
  <div class="stat-row">
    <div class="stat-chip">
      <div class="stat-number">{{ trashed_count }}</div>
      <div class="stat-label">Items in trash</div>
    </div>
  </div>
</section>

<section class="card">
  <div class="card-header">
    <h2>Trash contents</h2>
    <div class="card-tools">
      <a class="pill" href="/ui">Back to Dashboard</a>
    </div>
  </div>
  <p class="muted">Files in Trash can be restored or deleted permanently.</p>

  {% if files %}
    <div class="table-wrap">
      <table class="table" id="trashTable">
        <thead>
          <tr>
            <th>Item</th>
            <th>Trashed</th>
            <th>Restore</th>
            <th>Delete Forever</th>
          </tr>
        </thead>
        <tbody>
          {% for f in files %}
          <tr>
            <td data-label="Item">{{ f.display_name }}</td>
            <td data-label="Trashed">{{ f.record.trashed_at }}</td>
            <td data-label="Restore">
              <form method="post" action="/ui/restore" class="inline-form">
                <input type="hidden" name="file_token" value="{{ f.token }}" />
                <button type="submit">Restore</button>
              </form>
            </td>
            <td data-label="Delete Forever">
              <form method="post" action="/ui/delete" class="inline-form" onsubmit="return confirm('Delete permanently? This cannot be undone.');">
                <input type="hidden" name="file_token" value="{{ f.token }}" />
                <button type="submit" class="danger">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="muted">Trash is empty.</p>
  {% endif %}
</section>
{% endblock %}
